{% extends 'base.html' %}

{% block title %}Edit {{ filename }} - More Points{% endblock %}

{% block content %}
<form class="text-editor" action="javascript:save()" method="post">
    <div class="toolbar">
        <input type="submit" class="primary" value="Save">
        <button type="button" onclick="window.open(`/open/{{ site }}?path={{ path }}&download=1`, '_blank')">Download</button>
        <span>{{ filename }}</span>
    </div>
    <input type="hidden" name="path" value="{{ folder }}">
    <input type="hidden" name="filename" value="{{ filename }}">
    <input type="hidden" name="edit" value="1">
    <textarea autofocus name="content">{{ text }}</textarea>
</form>
{% for addon in addons["edit"] %}
<script src="{{ addon }}"></script>
{% endfor %}
<script>
    function save(){
        const form = new FormData(document.querySelector("form"))
        editFile('{{ site }}', form.get('path'), form.get('filename'), form.get('content'))
    }
</script>
{% endblock %}


